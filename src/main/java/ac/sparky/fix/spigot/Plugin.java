package ac.sparky.fix.spigot;

import ac.sparky.fix.common.Helper;
import ac.sparky.fix.spigot.config.ConfigLoader;
import ac.sparky.fix.spigot.config.ConfigValues;
import ac.sparky.fix.spigot.filter.FilterManager;
import ac.sparky.fix.spigot.impl.HookManager;
import ac.sparky.fix.spigot.listener.ChatListener;
import lombok.Getter;
import org.bukkit.plugin.java.JavaPlugin;

@Getter
public class Plugin extends JavaPlugin {
    @Getter private static Plugin instance;

    private final ConfigValues configValues = new ConfigValues();

    @Override
    public void onEnable() {
        instance = this;

        new ConfigLoader().load();
        new Helper();

        if (this.configValues.isUsePackets()) {
            new HookManager();
        }

        if (this.configValues.isUseFilter()) {
            new FilterManager().setupFilter();
        }

        getServer().getPluginManager().registerEvents(new ChatListener(), this);
    }
}
